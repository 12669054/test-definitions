metadata:
    name: linux-bluetooth-scan
    format: "Manual Test Definition 1.0"
    description: "Test if Bluetooth scan, pairing and file transfer works."
    maintainer:
        - amit.khare@linaro.org
    os:
        - ubuntu
        - openembedded
    scope:
        - functional
    devices:
        - hikey
    environment:
        - manual-test

run:
    steps:
        - After the board booted successfully, scan for BT devices.
        - "$ sudo su"
        - "# bluetoothctl -a"
        - "[bluetooth]# pairable on"
        - "[bluetooth]# scan on"
        - "[bluetooth]# quit"
        - Note MAC-ID of desired device to Connect.
        - "$ sudo su"
        - "# bluetoothctl -a"
        - "[bluetooth]# default-agent"
	- "[bluetooth]# pairable on"
	- "[bluetooth]# scan on"
	- "[bluetooth]# pair <MAC-ID>"
	- "[bluetooth]# trust <MAC-ID>"
	- "[bluetooth]# quit"
        - To copy file, mount the newly paired device(obex ftp server) to a folder.
        - "$ obexfs -b MAC_ID_OF_PAIRED_DEVICE your_folder/"
        - Copy the file from connected BT device "$ feh pic_filename"

    expected:
        - "Should be able to connect to Bluetooth device."
        - "BT pairing with other device should work."
        - "File transfer should work."
