metadata:
    name: spark
    format: "Lava-Test-Shell Test Definition 1.0"
    description: "Spark v1.4 package compilation using Apache Maven.
                  More Details - http://spark.apache.org"
    maintainer:
        - naresh.bhat@linaro.org
    os:
        - ubuntu
    devices:
        - mustang
    environment:
        - lava-test-shell

install:
    deps:
        - build-essential
        - maven
run:
    steps:
        - 'wget http://openjdk.linaro.org/releases/jdk8-server-release-1508.tar.xz'
        - 'tar -xvf jdk8-server-release-1508.tar.xz'
        - 'cd jdk8-server-release-1508/jre/lib/security'
        - 'mv cacerts cacerts-original'
        - 'ln -svf /etc/ssl/certs/java/cacerts .'
        - 'cd'
        - 'export JAVA_HOME=$PWD/jdk8-server-release-1508'
        - 'export PATH=$PATH:$PWD/jdk8-server-release-1508/bin'
        - 'git clone git://github.com/apache/spark.git -b branch-1.4'
        - 'cd spark'
        - 'mvn -X -Pyarn -Phadoop-2.4 -Dhadoop.version=2.4.0 -DskipTests clean package' 
