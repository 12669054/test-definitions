metadata:
    name: busybox
    format: "Lava-Test-Shell Test Definition 1.0"
    description: "Test busybox in android."
    maintainer:
        - chase.qi@linaro.org
    os:
        - android
    scope:
        - functional
    devices:
        - panda
        - panda-es
        - beaglebone-black

params:
    TEST_NAME: "busybox"
    TEST_PARAMS: ""

run:
    steps:
        - lava-test-case set-x --shell set -x
        - lava-test-case clean-before --shell rm -r /data/busybox 1>/dev/null 2>/dev/null
        - lava-test-case mk-busybox-folder --shell /system/bin/busybox mkdir /data/busybox
        - lava-test-case touch-test-file --shell /system/bin/busybox touch /data/busybox/test.txt
        - lava-test-case whoami-test --shell /system/bin/busybox whoami
        - lava-test-case which-busybox --shell /system/bin/busybox which busybox
        - lava-test-case basename-test --shell /system/bin/busybox basename /data/busybox/test.txt
        - lava-test-case cp-test --shell /system/bin/busybox cp /data/busybox/test.txt /data/busybox/test2.txt
        - lava-test-case rm-test --shell /system/bin/busybox rm /data/busybox/test2.txt
        - lava-test-case grep-service --shell /system/bin/busybox grep service /init.rc
        - lava-test-case clean-after --shell rm -r /data/busybox 1>/dev/null 2>/dev/null
        - lava-test-case fail-test --shell rm -r /data/busybox 1>/dev/null 2>/dev/null
        - lava-test-case set-x --shell set +x
