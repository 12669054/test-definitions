metadata:
  name: mauve
  format: "Lava-Test-Shell Test Definition 1.0"
  description: "Java Mauve Tests for Open Embedded"
  version: 1.0

install:
  git-repos:
    - git://git.linaro.org/qa/test-definitions.git
    - git://git.linaro.org/people/andrew.mcdermott/mauve/aarch64/mauve.git

# Note: a lot of these tests are commented out until the core packages
# pass without error.

run:
  steps:
    - 'DISPLAY=:10'
    - 'export DISPLAY'
    - 'Xvfb $DISPLAY &'
    - 'XVFBPID=$!'
    - 'PATH=$PATH:/lava/tests/$TESTRUN_ID/test-definitions/openembedded/scripts'
    - 'rm -rf $HOME/mauve'
    - 'ln -s /lava/tests/$TESTRUN_ID/mauve $HOME/mauve'
    - 'cd $HOME/mauve'
    - 'lava-test-case java.lang --shell mauve-test-pkg java.lang -showpasses'
#    - 'lava-test-case java.io --shell mauve-test-pkg java.io -showpasses'
#    - 'lava-test-case java.lang.management --shell mauve-test-pkg java.lang.management -showpasses'
#    - 'lava-test-case java.lang.ref --shell mauve-test-pkg java.lang.ref -showpasses'
#    - 'lava-test-case java.lang.reflect --shell mauve-test-pkg java.lang.reflect -showpasses'
#    - 'lava-test-case java.lang.reflect.sub --shell mauve-test-pkg java.lang.reflect.sub -showpasses'
#    - 'lava-test-case java.math --shell mauve-test-pkg java.math -showpasses'
#    - 'lava-test-case java.net --shell mauve-test-pkg java.net -showpasses'
#    - 'lava-test-case java.nio --shell mauve-test-pkg java.nio -showpasses'
#    - 'lava-test-case java.nio.channels --shell mauve-test-pkg java.nio.channels -showpasses'
#    - 'lava-test-case java.nio.charset --shell mauve-test-pkg java.nio.charset -showpasses'
#    - 'lava-test-case java.rmi.server --shell mauve-test-pkg java.rmi.server -showpasses'
#    - 'lava-test-case java.security --shell mauve-test-pkg java.security -showpasses'
#    - 'lava-test-case java.security.cert.pkix.pkits --shell mauve-test-pkg java.security.cert.pkix.pkits -showpasses'
#    - 'lava-test-case java.sql --shell mauve-test-pkg java.sql -showpasses'
#    - 'lava-test-case java.text --shell mauve-test-pkg java.text -showpasses'
#    - 'lava-test-case java.util --shell mauve-test-pkg java.util -showpasses'
#    - 'lava-test-case java.util.concurrent --shell mauve-test-pkg java.util.concurrent -showpasses'
#    - 'lava-test-case java.util.jar --shell mauve-test-pkg java.util.jar -showpasses'
#    - 'lava-test-case java.util.logging --shell mauve-test-pkg java.util.logging -showpasses'
#    - 'lava-test-case java.util.prefs --shell mauve-test-pkg java.util.prefs -showpasses'
#    - 'lava-test-case java.util.regex --shell mauve-test-pkg java.util.regex -showpasses'
#    - 'lava-test-case java.util.zip --shell mauve-test-pkg java.util.zip -showpasses'
#    - 'lava-test-case gnu.java.security --shell mauve-test-pkg gnu.java.security -showpasses'
#    - 'lava-test-case gnu.java.security.hash --shell mauve-test-pkg gnu.java.security.hash -showpasses'
#    - 'lava-test-case gnu.java.security.jce --shell mauve-test-pkg gnu.java.security.jce -showpasses'
#    - 'lava-test-case gnu.java.security.key --shell mauve-test-pkg gnu.java.security.key -showpasses'
#    - 'lava-test-case gnu.java.security.key.dss --shell mauve-test-pkg gnu.java.security.key.dss -showpasses'
#    - 'lava-test-case gnu.java.security.key.rsa --shell mauve-test-pkg gnu.java.security.key.rsa -showpasses'
#    - 'lava-test-case gnu.java.security.sig --shell mauve-test-pkg gnu.java.security.sig -showpasses'
#    - 'lava-test-case gnu.java.security.sig.dss --shell mauve-test-pkg gnu.java.security.sig.dss -showpasses'
#    - 'lava-test-case gnu.java.security.sig.rsa --shell mauve-test-pkg gnu.java.security.sig.rsa -showpasses'
#    - 'lava-test-case gnu.java.security.util --shell mauve-test-pkg gnu.java.security.util -showpasses'
#    - 'lava-test-case gnu.javax.crypto.assembly --shell mauve-test-pkg gnu.javax.crypto.assembly -showpasses'
#    - 'lava-test-case gnu.javax.crypto.cipher --shell mauve-test-pkg gnu.javax.crypto.cipher -showpasses'
#    - 'lava-test-case gnu.javax.crypto.jce --shell mauve-test-pkg gnu.javax.crypto.jce -showpasses'
#    - 'lava-test-case gnu.javax.crypto.jce.keyring --shell mauve-test-pkg gnu.javax.crypto.jce.keyring -showpasses'
#    - 'lava-test-case gnu.javax.crypto.key.dh --shell mauve-test-pkg gnu.javax.crypto.key.dh -showpasses'
#    - 'lava-test-case gnu.javax.crypto.key.srp6 --shell mauve-test-pkg gnu.javax.crypto.key.srp6 -showpasses'
#    - 'lava-test-case gnu.javax.crypto.keyring --shell mauve-test-pkg gnu.javax.crypto.keyring -showpasses'
#    - 'lava-test-case gnu.javax.crypto.kwa --shell mauve-test-pkg gnu.javax.crypto.kwa -showpasses'
#    - 'lava-test-case gnu.javax.crypto.mac --shell mauve-test-pkg gnu.javax.crypto.mac -showpasses'
#    - 'lava-test-case gnu.javax.crypto.mode --shell mauve-test-pkg gnu.javax.crypto.mode -showpasses'
#    - 'lava-test-case gnu.javax.crypto.pad --shell mauve-test-pkg gnu.javax.crypto.pad -showpasses'
#    - 'lava-test-case gnu.javax.crypto.prng --shell mauve-test-pkg gnu.javax.crypto.prng -showpasses'
#    - 'lava-test-case gnu.javax.crypto.sasl --shell mauve-test-pkg gnu.javax.crypto.sasl -showpasses'
#    - 'lava-test-case gnu.javax.crypto.sasl.srp --shell mauve-test-pkg gnu.javax.crypto.sasl.srp -showpasses'
#    - 'lava-test-case gnu.javax.swing.text.html.parser.support --shell mauve-test-pkg gnu.javax.swing.text.html.parser.support -showpasses'
#    - 'lava-test-case gnu.javax.swing.text.html.parser.support.low --shell mauve-test-pkg gnu.javax.swing.text.html.parser.support.low -showpasses'
#    - 'lava-test-case java.awt --shell mauve-test-pkg java.awt -showpasses'
#    - 'lava-test-case java.awt.color --shell mauve-test-pkg java.awt.color -showpasses'
#    - 'lava-test-case java.awt.datatransfer --shell mauve-test-pkg java.awt.datatransfer -showpasses'
#    - 'lava-test-case java.awt.dnd --shell mauve-test-pkg java.awt.dnd -showpasses'
#    - 'lava-test-case java.awt.event --shell mauve-test-pkg java.awt.event -showpasses'
#    - 'lava-test-case java.awt.font --shell mauve-test-pkg java.awt.font -showpasses'
#    - 'lava-test-case java.awt.geom --shell mauve-test-pkg java.awt.geom -showpasses'
#    - 'lava-test-case java.awt.image --shell mauve-test-pkg java.awt.image -showpasses'
#    - 'lava-test-case java.beans --shell mauve-test-pkg java.beans -showpasses'
#    - 'lava-test-case java.beans.beancontext --shell mauve-test-pkg java.beans.beancontext -showpasses'
#    - 'lava-test-case javax.accessibility --shell mauve-test-pkg javax.accessibility -showpasses'
#    - 'lava-test-case javax.crypto.spec --shell mauve-test-pkg javax.crypto.spec -showpasses'
#    - 'lava-test-case javax.imageio --shell mauve-test-pkg javax.imageio -showpasses'
#    - 'lava-test-case javax.imageio.plugins.jpeg --shell mauve-test-pkg javax.imageio.plugins.jpeg -showpasses'
#    - 'lava-test-case javax.imageio.spi --shell mauve-test-pkg javax.imageio.spi -showpasses'
#    - 'lava-test-case javax.imageio.stream --shell mauve-test-pkg javax.imageio.stream -showpasses'
#    - 'lava-test-case javax.management --shell mauve-test-pkg javax.management -showpasses'
#    - 'lava-test-case javax.management.openmbean --shell mauve-test-pkg javax.management.openmbean -showpasses'
#    - 'lava-test-case javax.management.remote --shell mauve-test-pkg javax.management.remote -showpasses'
#    - 'lava-test-case javax.naming --shell mauve-test-pkg javax.naming -showpasses'
#    - 'lava-test-case javax.naming.directory --shell mauve-test-pkg javax.naming.directory -showpasses'
#    - 'lava-test-case javax.net.ssl --shell mauve-test-pkg javax.net.ssl -showpasses'
#    - 'lava-test-case javax.print --shell mauve-test-pkg javax.print -showpasses'
#    - 'lava-test-case javax.print.attribute --shell mauve-test-pkg javax.print.attribute -showpasses'
#    - 'lava-test-case javax.print.attribute.standard --shell mauve-test-pkg javax.print.attribute.standard -showpasses'
#    - 'lava-test-case javax.rmi --shell mauve-test-pkg javax.rmi -showpasses'
#    - 'lava-test-case javax.rmi.ssl --shell mauve-test-pkg javax.rmi.ssl -showpasses'
#    - 'lava-test-case javax.security.auth.login --shell mauve-test-pkg javax.security.auth.login -showpasses'
#    - 'lava-test-case javax.sound.sampled --shell mauve-test-pkg javax.sound.sampled -showpasses'
#    - 'lava-test-case javax.swing --shell mauve-test-pkg javax.swing -showpasses'
#    - 'lava-test-case javax.swing.border --shell mauve-test-pkg javax.swing.border -showpasses'
#    - 'lava-test-case javax.swing.event --shell mauve-test-pkg javax.swing.event -showpasses'
#    - 'lava-test-case javax.swing.filechooser --shell mauve-test-pkg javax.swing.filechooser -showpasses'
#    - 'lava-test-case javax.swing.plaf --shell mauve-test-pkg javax.swing.plaf -showpasses'
#    - 'lava-test-case javax.swing.plaf.basic --shell mauve-test-pkg javax.swing.plaf.basic -showpasses'
#    - 'lava-test-case javax.swing.plaf.metal --shell mauve-test-pkg javax.swing.plaf.metal -showpasses'
#    - 'lava-test-case javax.swing.table --shell mauve-test-pkg javax.swing.table -showpasses'
#    - 'lava-test-case javax.swing.text --shell mauve-test-pkg javax.swing.text -showpasses'
#    - 'lava-test-case javax.swing.text.html --shell mauve-test-pkg javax.swing.text.html -showpasses'
#    - 'lava-test-case javax.swing.text.html.parser --shell mauve-test-pkg javax.swing.text.html.parser -showpasses'
#    - 'lava-test-case javax.swing.tree --shell mauve-test-pkg javax.swing.tree -showpasses'
#    - 'lava-test-case javax.swing.undo --shell mauve-test-pkg javax.swing.undo -showpasses'
#    - 'lava-test-case javax.xml.parsers --shell mauve-test-pkg javax.xml.parsers -showpasses'
#    - 'lava-test-case javax.xml.xpath --shell mauve-test-pkg javax.xml.xpath -showpasses'
#    - 'lava-test-case org.omg --shell mauve-test-pkg locales -showpasses'
#    - 'lava-test-case org.omg --shell mauve-test-pkg org.omg -showpasses'
#    - 'lava-test-case org.w3c.dom --shell mauve-test-pkg org.w3c.dom -showpasses'
    - 'kill $XVFBPID'

parse:
  pattern: "(?P<result>(PASS|FAIL|SKIP)):\\s+(?P<test_result_id>(.*))"
  fixupdict:
    PASS: pass
    FAIL: fail
    SKIP: skip
